-#   Copyright (c) 2010, Diaspora Inc.  This file is
-#   licensed under the Affero General Public License version 3 or later.  See
-#   the COPYRIGHT file.


- content_for :head do
  :javascript
    $("#new_aspect").live("submit", function(){
      var newAspectName = $(this).children("#aspect_name").val();
      $("ul.aspects").prepend($("<li>" + newAspectName + "</li>").fadeIn(200));
      $("#aspect_nav").find("ul").first().find("li:last").before($("<li><a href='#'>" + newAspectName + "</a></li>").fadeIn(200));
    });

    $(".aspects li").find(".delete").live("click", function(){
      var aspectElement = $(this).parent("li");
      aspectElement.fadeOut(300, function(){aspectElement.remove();});
    });

.span-8.append-1.last{:style => "text-align:right;"}
  %h1
    = "Welcome to Diaspora!"
    .description
      Do the stuff below to further complete some things.

  %h3
    = link_to "Edit your profile", getting_started_path(1)
    %br
    = link_to "Define your aspects", getting_started_path(2)
    %br
    = link_to "Find your friends", getting_started_path(3)
    %br

.span-15.last
  %h3
    Your aspects
  %p
    Diaspora aspects are mappings of your real-life aspects.

  %h4
    Aspect name
  - form_for Aspect.new, :remote => true do |aspect|
    = aspect.text_field :name
    = aspect.submit "Add"

  %ul.aspects
    - for aspect in @aspects
      %li{:style=>"position:relative;"}
        = aspect
        .friend_pictures.horizontal
          - for friend in aspect.people
            = person_image_link(friend)

        = link_to "x", aspect_path(aspect), :confirm => "are you sure?", :method => :delete, :remote => true, :class => "delete right"

